#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Format and lint Python code using make (uses Dev Container environment)
echo "ğŸ“ Formatting and linting Python code..."
if ! make format; then
    echo "âŒ Code formatting/linting failed. Please fix the issues above."
    exit 1
fi

# Run type checking (non-blocking, warnings only)
echo "ğŸ” Running type checking..."
make lint || echo "âš ï¸  MyPy warnings found (non-blocking)"

# Stage any files that were automatically formatted
echo "ğŸ“ Staging formatted files..."
git add .

echo "âœ… Pre-commit checks completed successfully!"