#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Format Python code with ruff
echo "ğŸ“ Formatting Python code..."
uv run ruff format .

# Run Python linting with auto-fix
echo "ğŸ§¹ Running Python linting..."
if ! uv run ruff check . --fix; then
    echo "âŒ Ruff linting failed. Please fix the issues above."
    exit 1
fi

# Run type checking (non-blocking, warnings only)
echo "ğŸ” Running type checking..."
uv run mypy . || echo "âš ï¸  MyPy warnings found (non-blocking)"

# Stage any files that were automatically formatted
echo "ğŸ“ Staging formatted files..."
git add .

echo "âœ… Pre-commit checks completed successfully!"